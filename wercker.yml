box: 
  id: ymotongpoo/qmk_firmware

build:
  steps:
    - script:
        name: build default keymap.
        cwd: $WERCKER_SOURCE_DIR
        code: |
          make clean && make keyboard=ergodox_ez keymap=$TARGET_KEYMAP
    - script:
        name: move built firmware to output dir.
        cwd: $WERCKER_SOURCE_DIR
        code: |
          mv ergodox_ez_$TARGET_KEYMAP.hex $WERCKER_OUTPUT_DIR/ergodox_ez.hex
deploy:
  steps:
    - heroku-deploy:
        key: $HEROKU_KEY
        user: $HEROKU_USER
        app-name: $HEROKU_APP_NAME
